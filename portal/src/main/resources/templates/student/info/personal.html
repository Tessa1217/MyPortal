<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
			xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
			layout:decorate="~{layout/student_layout}">
<head>
<meta charset="UTF-8">
<title>내 정보 조회</title>

<style>

#main {
	display: block;
}

.buttonmod {
	width : 80px;
	/* float : right; */
	
}
.card .table2{
	width : 60%;
	float : ;
}
.card .faceImg{
	width : 20%;
	float : left;
}
</style>
</head>
<body>
	<th:block layout:fragment="studentContent">
	<div id="main">
		<div>
			<h2>내 정보 조회</h2>
		</div>
		<div class="card">
			<p style="float:left;">개인 정보</p> 
			<button class="btn btn-primary buttonmod" onclick="studentInfoUpdate()">수정</button> 
			<table class="table table2">
				<tr>
					<th>전공학과</th><td th:text="${studentInfoSelect.departName}"></td><th>학번</th><td th:text="${studentInfoSelect.studentId}"></td>
				</tr>
				<tr>
					<th>이름</th><td th:text="${studentInfoSelect.studentName}"></td><th>성별</th><td th:text="${studentInfoSelect.studentGender}"></td>
				</tr>
				<tr>
					<th>학년</th><td th:text="${studentInfoSelect.studentGrade}"></td><th>생년월일</th><td th:text="${#dates.format(studentInfoSelect.studentBirth, 'yyyy-MM-dd')}"></td>
				</tr>
				<tr>
					<th>학적상태</th>
					<td th:if="${studentInfoSelect.studentStatus =='AS00'}">재학</td>
					<td th:if="${studentInfoSelect.studentStatus =='AS01'}">휴학</td>
					<td th:if="${studentInfoSelect.studentStatus =='AS02'}">졸업</td>
					<th>입학학부</th><td th:text="${studentInfoSelect.departName}"></td>
				</tr>
				<tr>
					<th>입학일자</th><td th:text="${#dates.format(studentInfoSelect.studentAdmissionDate, 'yyyy-MM-dd')}"></td>
					<th>입학구분</th>
					<td th:if="${studentInfoSelect.studentDivision =='AD00'}">신입학</td>
					<td th:if="${studentInfoSelect.studentDivision =='AD01'}">편입학</td>
				</tr>
				<tr>
					<th>우편번호</th><td th:text="${studentInfoSelect.studentPostalCode}"></td><th>주소</th><td th:text="${studentInfoSelect.studentAddr}"></td>
				</tr>
				<tr>
					<th>연락처</th>
					<td><input type ="text" class="form-control" name="studentPhoneUpdate" id="studentPhoneUpdate"
					th:value="${studentInfoSelect.studentPhone}"></td>
					<th>이메일</th>
					<td><input type ="text" class="form-control" name="studentEmailUpdate" id="studentEmailUpdate"
					th:value="${studentInfoSelect.studentEmail}"></td>
				</tr>
			</table>
			<table>
			<tr>
			<td><img th:src="|/download/2.jpg|" class ="faceImg"></td>
			</tr>			
			</table>
			<p>보호자 정보</p>
			<table class="table">
				<tr>
					<th>보호자 성명</th><td><input type ="text" class="form-control" name="parentsNameUpdate" id="parentsNameUpdate"
					th:value="${studentInfoSelect.parentsName}"></td>
				</tr>
				<tr>
					<th>연락처</th><td><input type ="text" class="form-control" name="parentsPhoneUpdate" id="parentsPhoneUpdate"
					th:value="${studentInfoSelect.parentsPhone}"></td>
				</tr>
				<tr>
					<th>관계</th>
					<td>
						<select name="parentsRelUpdate" id ="parentsRelUpdate" th:value="${studentInfoSelect.parentsRel}">
							<option th:selected="${studentInfoSelect.parentsRel}=='P01'">부</option>	
							<option th:selected="${studentInfoSelect.parentsRel}=='P02'">모</option>	
							<option th:selected="${studentInfoSelect.parentsRel}=='ETC'">기타</option>	
						</select>
					</td>
					<!-- <td th:if="${studentInfoSelect.parentsRel =='P01'}">부</td>
					<td th:if="${studentInfoSelect.parentsRel =='P02'}">모</td>
					<td th:if="${studentInfoSelect.parentsRel =='ETC'}">기타</td> -->
				</tr>
			</table>
		</div>
		<!-- <div class="modal fade" id="studentInfoModModal" tabindex="-1"
				role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="exampleModalLabel">게시글 수정</h5>
							<button class="close" type="button" data-dismiss="modal"
								aria-label="Close">
								<span aria-hidden="true">×</span>
							</button>
						</div>
						<div class="modal-body">
							<input id="board_update_id" name="board_update_id" type="hidden"
								class="input" value="${board.boardNo}">
							<div class="group1">
								<select id="board_update_localInfo"
									name="board_update_localInfo">
									<option value="서울특별시">서울특별시</option>
									<option value="부산광역시">부산광역시</option>
									<option value="대구광역시">대구광역시</option>
									<option value="인천광역시">인천광역시</option>
									<option value="광주광역시">광주광역시</option>
									<option value="대전광역시">대전광역시</option>
									<option value="울산광역시">울산광역시</option>
									<option value="경기도">경기도</option>
									<option value="경상도">경상도</option>
									<option value="전라도">전라도</option>
									<option value="충청도">충청도</option>
									<option value="강원도">강원도</option>
								</select>
							</div>

							<div class="group">
								<label for="board_update_title" width="1000px" class="label">제목</label>
								<input id="board_update_title" name="board_update_title"
									type="text" class="input">
							</div>
							<div class="group">
								<label for="board_update_subject" class="label">내용</label>
								<textarea id="board_update_subject" name="board_update_subject"
									class="input"></textarea>
							</div>

						</div>
						<div class="modal-footer">
							<button class="btn btn-sm btn-danger" type="button"
								data-dismiss="modal">Cancel</button>
							<button class="btn btn-sm btn-danger" onclick="boardUpdate()">수정</button>
						</div>
					</div>
				</div>
			</div> -->
	</div>
	</th:block>
	<script>
	function studentInfoUpdate(){
		   $.ajax({
		      url:"/student/studentInfoUpdate",
		      method:"post",
		      dataType : "json",
		      data: {
		         "studentPhone" : $("#studentPhoneUpdate").val(),
		         "studentEmail" : $("#studentEmailUpdate").val(),
		         "parentsName" : $("#parentsNameUpdate").val(),
		         "parentsPhone" : $("#parentsPhoneUpdate").val(),
		         "parentsRel" : $("#parentsRelUpdate").val(),
		      },
		      dataType : "json",
		      success:function(result){
//		          toastr.info("글수정완료");
//		          $("#boardTable").load(location.href+"#boardTable");
		         location.reload();
//		         $("#boardUpdateModal").modal("hide");
		      }
		   });
		}	
	</script>
</body>
</html>