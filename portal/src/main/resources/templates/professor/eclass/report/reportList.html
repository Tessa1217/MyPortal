<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/professor-eclass_layout}">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<th:block layout:fragment="professorEclassContent">
		<div id="main">
		<div class="page-title">
			<h3>강의 과제 리스트</h3>
		</div>
			<div class="card">
				<div class="card-body">
					<th:block th:if="${reportList.isEmpty()}">
					<div class="center">
						<h3>현재 등록된 과제가 없습니다.</h3>
					</div>
					<div class="btnContainer">
						<button type="button" 
						class="btn btn-primary btn-lg"
						th:onclick="|location.href='@{/professor/eclass/insertReport}'|">과제 등록하기</button>
					</div>
					</th:block>
					<th:block th:unless="${reportList.isEmpty()}">
						<table class="table">
							<thead>
								<tr>
									<th>과제 주차</th>
									<th>과제 오픈일</th>
									<th>과제 마감일</th>
									<th>과제 첨부파일</th>
									<th>과제 참고사항 확인</th>
									<th>과제 수정</th>
								</tr>
							</thead>
							<tbody>
							<th:block th:each="r : ${reportList}">
								<tr>
									<td th:text="|${#strings.substring(r.weekCode, 8, 10)}주차|"></td>
									<td th:text="${#dates.format(r.reportStartDate, 'yyyy-MM-dd')}"></td>
									<td th:text="${#dates.format(r.reportEndDate, 'yyyy-MM-dd')}"></td>
									<td><a th:href="@{/report/download/{reportFileCode}(reportFileCode=${r.reportFileCode})}"
									th:text="${r.reportFile.reportFileName}"
									th:download="${r.reportFile.reportFileName}"></a></td>
									<td><button class="btn btn-sm btn-secondary" 
									th:classappend="${r.reportContent == null} ? disabled"
									type="button" th:onclick="showDetail()"
									th:data-report="${r.reportCode}">참고사항</button></td>
									<td><button class="btn btn-sm btn-primary" 
									type="button" 
									th:onclick="|location.href='@{/professor/eclass/updateReport/{reportCode}(reportCode = ${r.reportCode})}'|"
									th:classappend="${r.reportStartDate lt #dates.createNow()} ? disabled">수정</button></td>
								</tr>
							</th:block>
							</tbody>
						</table>
					</th:block>
				</div>
			</div>
		</div>
		<script th:inline="javascript">
			$(function() {
				
			})
			
			// 과제 참고사항 상세보기 기능
			function showDetail() {
				console.log("HI");
			}
			
		</script>
	</th:block>
</body>
</html>